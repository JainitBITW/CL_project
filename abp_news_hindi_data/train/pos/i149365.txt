1825 में, दुर्रानी राजवंश को शासन से हटा कर दोस्त मुहम्मद खान काबुल का अमीर बना था जो, पेशावर की वसूली के लिए ख़ैबर दर्रे को पाने के लिए प्रयासरत था। 1836 में सिख सेनानी हरि सिंह नलवा और नौ निहाल सिंह ख़ैबर पर सीमा की रखवाली कर रहा था, रक्षा के लिए खैबर दर्रे के पूर्वी छोर पर जमरूद में एक किला बनवाया। दोस्त मुहम्मद, दर्रे के दूसरे छोर पर अली मस्जिद `के पास एक किला बनवाया। 1837 की शुरुआत में, राजकुमार नौ निहाल सिंह लाहौर को लौट के शादी की और महाराजा तैयारी में व्यस्त हो गए।